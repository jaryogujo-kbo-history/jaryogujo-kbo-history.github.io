<!DOCTYPE html>
<html>
<head>
<title>감독으로 보는 한국프로야구 역사</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
<link rel=stylesheet href="index.css" type="text/css" media=screen>
</head>
<body>
  <div class="jg-head">
    <div class="jg-title"><a href="index.html"><span>감독</span>으로 보는 한국프로야구 역사</a></div>
    <div class="jg-link"><a href="index.html">시각화 다시 보기</a></div>
    <div class="jg-desc">감독으로 보는 한국프로야구 역사 감독으로 보는 한국프로야구 역사</div>
  </div>
  <div class="jg-content jg-article">
    <div class="jg-menu">
      <a class="jg-coach jg-on">감독에 관해서</a>
      <a class="jg-team">구단에 관해서</a>
    </div>
    <div class="jg-body">
      <div class="jg-coach"></div>
      <div class="jg-team"></div>
    </div>
  </div>
  <div class="jg-foot">
    <div class="jg-title"><span>감독</span>으로 보는 한국프로야구 역사</div>
    <div class="jg-logo"><hr class="jg-left"><img src="image/logo/logo@2x.png"><hr class="jg-right"></hr></div>
  </div>

  <script src="lib.js"></script>
  <script src="kbl-history.js"></script>
  <script>
    d3.select('div.jg-head').style('visibility', 'visible');
    d3.select('div.jg-foot').style('visibility', 'visible');
    d3.select('div.jg-body > .jg-team').style('display', 'none');

    function turnOnOff(on, off) {
      d3.select('div.jg-menu a.'+on).on('click', function(){
        d3.select(this).classed({'jg-on':true})
        d3.select('div.jg-menu a.'+off).classed({'jg-on':false})
        d3.select('div.jg-body > .'+on).style('display', 'block')
        d3.select('div.jg-body > .'+off).style('display', 'none')
      })
    }

    turnOnOff('jg-coach', 'jg-team');
    turnOnOff('jg-team', 'jg-coach');

    var kblHistoryDm = d3.kblHistoryDataMng();
    var chart = d3.kblHistory();
    kblHistoryDm.loadHistoryCsv('data/kbl-team-history.csv')
    kblHistoryDm.on('dataReady', function(_data) {
      var historyData = chart.data(_data);
      var kblArticleDm = d3.kblHistoryDataMng();
      var article = d3.kblHistoryArticle();
      kblArticleDm.loadArticleCsv('data/article.csv');
      kblArticleDm.on('dataReady', function(articleData) {
        d3.select('div.jg-body')
          .datum({history:historyData, article:articleData})
          .call(article);
      });
    })


  </script>
</body>
</html>
